{"version":3,"sources":["store/actions.tsx","store/index.ts","api/api.ts","components/CurrentUser/CurrentUser.tsx","components/TodoList/TodoList.tsx","App.tsx","index.tsx"],"names":["LOAD_USER","SELECT_USER","LOAD_TODOS","DELETE_TODO","LOAD_ERROR","actions","user","type","userId","todos","message","selectors","state","errorLoading","initialState","store","createStore","action","filter","todo","id","composeWithDevTools","apiUrl","getTodos","a","fetch","response","json","getUser","CurrentUser","currentUser","useSelector","dispatch","useDispatch","selectedUserId","error","useEffect","serverUser","deleteUser","useCallback","className","name","email","phone","onClick","TodoList","useState","query","setQuery","selectedTodos","setSelectedTodos","filteredVisibleTodos","completed","getVisibleTodos","title","toLowerCase","includes","handleDeleteTodo","deleteTodo","selectUser","value","onChange","event","target","map","readOnly","App","getAllPosts","gotTodos","Root","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8650a825.chunk.js","sourcesContent":["import { User, Todo } from '../react-app-env';\n\nexport const LOAD_USER = 'LOAD_USER';\nexport const SELECT_USER = 'SELECT_USER';\nexport const CLEAR_USER = 'CLEAR_USER';\nexport const LOAD_TODOS = 'LOAD_TODOS';\nexport const DELETE_TODO = 'DELETE_TODO';\nexport const LOAD_ERROR = 'LOAD_ERROR';\n\nexport const actions = {\n  loadUserAction: (user: User) => ({\n    type: LOAD_USER,\n    user,\n  }),\n  selectUserAction: (userId: number) => ({\n    type: SELECT_USER,\n    userId,\n  }),\n  loadTodosAction: (todos: Todo[]) => ({\n    type: LOAD_TODOS,\n    todos,\n  }),\n  loadErrorAction: (message: string) => ({\n    type: LOAD_ERROR,\n    message,\n  }),\n};\n\nexport const deleteTodo = (id: number) => ({\n  type: DELETE_TODO,\n  id,\n});\n","import { createStore, AnyAction } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport { User, Todo } from '../react-app-env';\n\nimport {\n  LOAD_TODOS,\n  LOAD_USER,\n  LOAD_ERROR,\n  DELETE_TODO,\n  SELECT_USER,\n} from './actions';\n\nexport const selectors = {\n  loadUserSelector: (state: RootState) => state.user,\n  getUsersIdSelector: (state: RootState) => state.userId,\n  loadTodosSelector: (state: RootState) => state.todos,\n  loadErrorSelector: (state: RootState) => state.errorLoading,\n};\n\nexport type RootState = {\n  user: User | null,\n  userId: number,\n  todos: Todo[],\n  errorLoading: string,\n};\n\nconst initialState: RootState = {\n  user: null,\n  userId: 0,\n  todos: [],\n  errorLoading: '',\n};\n\nconst rootReducer = (state = initialState, action: AnyAction) => {\n  switch (action.type) {\n    case LOAD_TODOS:\n      return {\n        ...state,\n        todos: action.todos,\n      };\n    case LOAD_USER:\n      return {\n        ...state,\n        user: action.user,\n      };\n    case SELECT_USER:\n      return {\n        ...state,\n        userId: action.userId,\n      };\n    case DELETE_TODO:\n      return {\n        ...state,\n        todos: state.todos.filter(todo => todo.id !== action.id),\n      };\n    case LOAD_ERROR:\n      return {\n        ...state,\n        errorLoading: action.message,\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(),\n);\n\nexport default store;\n","import { User, Todo } from '../react-app-env';\n\nconst apiUrl = 'https://mate.academy/students-api';\n\nexport const getTodos = async (): Promise<Todo[]> => {\n  const response = await fetch(`${apiUrl}/todos`);\n\n  return response.json();\n};\n\nexport const getUser = async (userId: number): Promise<User> => {\n  const response = await fetch(`${apiUrl}/users/${userId}`);\n\n  return response.json();\n};\n","import React, { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getUser } from '../../api/api';\nimport './CurrentUser.scss';\n\nimport { actions } from '../../store/actions';\nimport { selectors } from '../../store/index';\n\nexport const CurrentUser: React.FC = () => {\n  const currentUser = useSelector(selectors.loadUserSelector);\n  const dispatch = useDispatch();\n  const selectedUserId = useSelector(selectors.getUsersIdSelector);\n  const error = useSelector(selectors.loadErrorSelector);\n\n  useEffect(() => {\n    async function response() {\n      try {\n        const serverUser = await getUser(selectedUserId);\n\n        dispatch(actions.loadUserAction(serverUser));\n      } catch {\n        dispatch(actions.loadErrorAction('Can not load user'));\n      }\n    }\n\n    response();\n  }, [selectedUserId]);\n\n  const deleteUser = useCallback((userId: number) => {\n    dispatch(actions.selectUserAction(userId));\n  }, []);\n\n  return (\n    <>\n      {currentUser ? (\n        <div className=\"CurrentUser\">\n          <h2 className=\"CurrentUser__title\">\n            <span>\n              {`Selected user: ${currentUser.id}`}\n            </span>\n          </h2>\n          <h3\n            className=\"CurrentUser__name\"\n            data-cy=\"userName\"\n          >\n            {currentUser.name}\n          </h3>\n          <p className=\"CurrentUser__email\">\n            {currentUser.email}\n          </p>\n          <p className=\"CurrentUser__phone\">\n            {currentUser.phone}\n          </p>\n          <button\n            type=\"button\"\n            className=\"CurrentUser__button\"\n            onClick={() => deleteUser(0)}\n          >\n            Clear\n          </button>\n        </div>\n      )\n        : (\n          <p>\n            {error}\n          </p>\n        )}\n    </>\n  );\n};\n","import React, { ChangeEvent, useState, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { selectors } from '../../store/index';\nimport { actions, deleteTodo } from '../../store/actions';\nimport './TodoList.scss';\n\nexport const TodoList: React.FC = () => {\n  const [query, setQuery] = useState('');\n  const [selectedTodos, setSelectedTodos] = useState('');\n\n  const todos = useSelector(selectors.loadTodosSelector);\n\n  const dispatch = useDispatch();\n\n  const getVisibleTodos = () => {\n    switch (selectedTodos) {\n      case 'Active':\n        return todos.filter(todo => !todo.completed);\n      case 'Completed':\n        return todos.filter(todo => todo.completed);\n      default:\n        return todos;\n    }\n  };\n\n  const visibleTodos = getVisibleTodos();\n\n  const filteredVisibleTodos = visibleTodos.filter(todo => (\n    todo.title.toLowerCase().includes(query.toLowerCase())\n  ));\n\n  const onChangeInput = (event: ChangeEvent<HTMLInputElement>) => {\n    setQuery(event.target.value);\n  };\n\n  const onChangeSelected = (event: ChangeEvent<HTMLSelectElement>) => {\n    setSelectedTodos(event.target.value);\n  };\n\n  const handleDeleteTodo = useCallback((id: number) => {\n    dispatch(deleteTodo(id));\n  }, []);\n\n  const selectUser = useCallback((userId: number) => {\n    dispatch(actions.selectUserAction(userId));\n  }, []);\n\n  return (\n    <div className=\"TodoList\">\n      <h1>Redux list of todos</h1>\n      <label>\n        <input\n          className=\"TodoList__select\"\n          type=\"text\"\n          value={query}\n          data-cy=\"filterByTitle\"\n          onChange={onChangeInput}\n        />\n      </label>\n      <select\n        className=\"TodoList__select\"\n        value={selectedTodos}\n        onChange={onChangeSelected}\n      >\n        <option value=\"All\">All</option>\n        <option value=\"Active\">Active</option>\n        <option value=\"Completed\">Completed</option>\n      </select>\n\n      <div className=\"TodoList__list-container\">\n        <ul\n          className=\"TodoList__list\"\n          data-cy=\"listOfTodos\"\n        >\n          {\n            filteredVisibleTodos.map(todo => (\n              <li\n                className={`\n                    TodoList__item\n                    ${todo.completed\n                ? 'TodoList__item--checked'\n                : 'TodoList__item--unchecked'\n              }`}\n                key={todo.id}\n              >\n                <label className=\"TodoList__input\">\n                  <input\n                    type=\"checkbox\"\n                    readOnly\n                  />\n                  <p>{todo.title}</p>\n                </label>\n                {todo.userId && (\n                  <div>\n                    <button\n                      type=\"button\"\n                      data-cy=\"userButton\"\n                      className={`TodoList__user-button button\n                       ${todo.completed\n                          && 'TodoList__user-button--selected'}\n                        `}\n                      onClick={() => selectUser(todo.userId)}\n                    >\n                      {`User ${todo.userId}`}\n                    </button>\n\n                    <button\n                      type=\"button\"\n                      onClick={() => handleDeleteTodo(todo.id)}\n                      className=\"TodoList__deleteButton button\"\n                    >\n                      DELETE\n                    </button>\n                  </div>\n                )}\n              </li>\n            ))\n          }\n        </ul>\n      </div>\n    </div>\n  );\n};\n","import { useDispatch, useSelector } from 'react-redux';\nimport { useEffect, useCallback } from 'react';\nimport { getTodos } from './api/api';\nimport { actions } from './store/actions';\nimport { selectors } from './store/index';\nimport { CurrentUser } from './components/CurrentUser/CurrentUser';\nimport { TodoList } from './components/TodoList/TodoList';\nimport './styles/general.scss';\n\nimport './App.scss';\n\nconst App = () => {\n  const selectedUserId = useSelector(selectors.getUsersIdSelector);\n\n  const dispatch = useDispatch();\n\n  const getAllPosts = useCallback(\n    async () => {\n      const gotTodos = await getTodos();\n\n      dispatch(actions.loadTodosAction(gotTodos));\n    }, [],\n  );\n\n  useEffect(() => {\n    getAllPosts();\n  }, []);\n\n  return (\n    <>\n      <div className=\"App\">\n        <div className=\"App__sidebar\">\n          <TodoList />\n        </div>\n        <div className=\"App__content\">\n          <div className=\"App__content-container\">\n            {selectedUserId ? (\n              <CurrentUser />\n            ) : 'No user selected'}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport store from './store';\nimport App from './App';\n\nconst Root = () => (\n  <Provider store={store}>\n    <App />\n  </Provider>\n);\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}